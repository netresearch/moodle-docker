# Moodle 4.5 Docker Stack - Environment Configuration
# Copy this file to .env and customize with your values
# IMPORTANT: Generate secure passwords for production!

# ============================================================================
# Project Configuration
# ============================================================================
COMPOSE_PROJECT_NAME=moodle45

# Web ports (adjust if needed, bind to 127.0.0.1 for local access only)
MOODLE_DOCKER_WEB_PORT=8080
MOODLE_DOCKER_WEB_PORT_SSL=8443

# ============================================================================
# Moodle Configuration
# ============================================================================
MOODLE_SITE_URL=http://localhost:8080
# For production with Traefik: https://moodle.example.com

# ============================================================================
# Database Configuration (MariaDB 11)
# ============================================================================
DB_TYPE=mariadb
DB_HOST=database
DB_PORT=3306
DB_NAME=moodle
DB_USER=moodleuser
DB_PREFIX=mdl_

# SECURITY: Generate secure passwords!
# Example: openssl rand -base64 32
DB_PASSWORD=CHANGE_ME_SECURE_PASSWORD_HERE
DB_ROOT_PASSWORD=CHANGE_ME_SECURE_ROOT_PASSWORD_HERE

# ============================================================================
# Valkey Configuration (Redis-compatible cache & sessions)
# ============================================================================
VALKEY_HOST=valkey
VALKEY_PORT=6379

# SECURITY: Generate secure password!
VALKEY_PASSWORD=CHANGE_ME_SECURE_VALKEY_PASSWORD_HERE

# ============================================================================
# Traefik Configuration (optional - for production with Traefik)
# ============================================================================
# Domain for Moodle (used when starting with Traefik)
MOODLE_DOMAIN=moodle.example.com

# Traefik network name (must exist)
TRAEFIK_NETWORK=traefik

# TLS certificate resolver configured in Traefik
TRAEFIK_CERTRESOLVER=letsencrypt

# ============================================================================
# Notes
# ============================================================================
# 1. Never commit .env file to version control (add to .gitignore)
# 2. Generate strong passwords: openssl rand -base64 32
# 3. For production, use actual domain in MOODLE_SITE_URL
# 4. For Traefik mode: use 'make start-traefik' or 'docker compose -f compose.yml -f compose.traefik.yml up -d'
